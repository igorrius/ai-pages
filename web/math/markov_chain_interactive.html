<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∞–Ω—Ü—é–≥–∏ –ú–∞—Ä–∫–æ–≤–∞ - –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–µ –ù–∞–≤—á–∞–Ω–Ω—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .theory-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .canvas-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        canvas {
            border: 2px solid #667eea;
            border-radius: 10px;
            cursor: crosshair;
            display: block;
            margin: 0 auto;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .input-group {
            margin: 15px 0;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #667eea;
        }

        input[type="number"], select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input[type="number"]:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .matrix-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #e0e0e0;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }

        td input {
            width: 60px;
            padding: 5px;
            text-align: center;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
        }

        .simulation-output {
            background: #f0f4ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }

        .state-indicator {
            display: inline-block;
            padding: 8px 16px;
            margin: 5px;
            border-radius: 20px;
            font-weight: 600;
            animation: pulse 0.5s;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .example-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #f39c12;
        }

        .example-box h3 {
            color: #d35400;
            margin-bottom: 10px;
        }

        .info-badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin: 5px;
        }

        .formula {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-family: 'Georgia', serif;
            font-size: 1.2em;
            border: 2px dashed #667eea;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 20px;
            background: #e0e0e0;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .controls {
                grid-template-columns: 1fr;
            }

            canvas {
                width: 100%;
                height: auto;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîó –õ–∞–Ω—Ü—é–≥–∏ –ú–∞—Ä–∫–æ–≤–∞</h1>
            <p class="subtitle">–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–µ –Ω–∞–≤—á–∞–Ω–Ω—è —Ç–∞ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è</p>
        </header>

        <div class="content">
            <!-- –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ -->
            <div class="section">
                <h2>üìö –¢–µ–æ—Ä—ñ—è</h2>
                <div class="theory-box">
                    <h3>–©–æ —Ç–∞–∫–µ –õ–∞–Ω—Ü—é–≥ –ú–∞—Ä–∫–æ–≤–∞?</h3>
                    <p><strong>–õ–∞–Ω—Ü—é–≥ –ú–∞—Ä–∫–æ–≤–∞</strong> ‚Äî —Ü–µ —Å—Ç–æ—Ö–∞—Å—Ç–∏—á–Ω–∏–π –ø—Ä–æ—Ü–µ—Å, —è–∫–∏–π –∑–∞–¥–æ–≤–æ–ª—å–Ω—è—î <strong>–º–∞—Ä–∫—ñ–≤—Å—å–∫—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å</strong>: –º–∞–π–±—É—Ç–Ω—ñ–π —Å—Ç–∞–Ω –∑–∞–ª–µ–∂–∏—Ç—å –ª–∏—à–µ –≤—ñ–¥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω—É —ñ –Ω–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –º–∏–Ω—É–ª–∏—Ö —Å—Ç–∞–Ω—ñ–≤.</p>
                    
                    <div class="formula">
                        P(X<sub>n+1</sub> = j | X<sub>n</sub> = i, X<sub>n-1</sub> = i<sub>n-1</sub>, ..., X<sub>0</sub> = i<sub>0</sub>) = P(X<sub>n+1</sub> = j | X<sub>n</sub> = i)
                    </div>

                    <h4>–ö–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó:</h4>
                    <ul style="margin: 15px 0; line-height: 1.8;">
                        <li><span class="info-badge">–°—Ç–∞–Ω–∏</span> ‚Äî –º–æ–∂–ª–∏–≤—ñ –ø–æ–ª–æ–∂–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏</li>
                        <li><span class="info-badge">–ü–µ—Ä–µ—Ö–æ–¥–∏</span> ‚Äî –∑–º—ñ–Ω–∞ —Å—Ç–∞–Ω—ñ–≤ –∑ –ø–µ–≤–Ω–æ—é –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—é</li>
                        <li><span class="info-badge">–ú–∞—Ç—Ä–∏—Ü—è –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤</span> ‚Äî —Ç–∞–±–ª–∏—Ü—è –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤ –º—ñ–∂ —Å—Ç–∞–Ω–∞–º–∏</li>
                        <li><span class="info-badge">–ú–∞—Ä–∫—ñ–≤—Å—å–∫–∞ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å</span> ‚Äî –º–∞–π–±—É—Ç–Ω—î –∑–∞–ª–µ–∂–∏—Ç—å —Ç—ñ–ª—å–∫–∏ –≤—ñ–¥ —Ç–µ–ø–µ—Ä—ñ—à–Ω—å–æ–≥–æ</li>
                    </ul>
                </div>

                <div class="example-box">
                    <h3>üå§Ô∏è –ü—Ä–∏–∫–ª–∞–¥: –ü–æ–≥–æ–¥–∞</h3>
                    <p>–£—è–≤—ñ–º–æ –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –∑ —Ç—Ä—å–æ–º–∞ —Å—Ç–∞–Ω–∞–º–∏: –°–æ–Ω—è—á–Ω–æ, –•–º–∞—Ä–Ω–æ, –î–æ—â.</p>
                    <p>–Ø–∫—â–æ —Å—å–æ–≥–æ–¥–Ω—ñ —Å–æ–Ω—è—á–Ω–æ, –∑–∞–≤—Ç—Ä–∞ –º–æ–∂–µ –±—É—Ç–∏:</p>
                    <ul style="margin: 10px 0 10px 20px;">
                        <li>–°–æ–Ω—è—á–Ω–æ –∑ –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—é 70%</li>
                        <li>–•–º–∞—Ä–Ω–æ –∑ –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—é 20%</li>
                        <li>–î–æ—â –∑ –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—é 10%</li>
                    </ul>
                    <p>–¶–µ –∫–ª–∞—Å–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –ª–∞–Ω—Ü—é–≥–∞ –ú–∞—Ä–∫–æ–≤–∞!</p>
                </div>
            </div>

            <!-- –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ -->
            <div class="section">
                <h2>üéÆ –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ —Å–∏–º—É–ª—è—Ü—ñ—è</h2>
                
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('visual')">–í—ñ–∑—É–∞–ª—å–Ω–∞ –º–æ–¥–µ–ª—å</button>
                    <button class="tab" onclick="switchTab('weather')">–ü—Ä–∏–∫–ª–∞–¥: –ü–æ–≥–æ–¥–∞</button>
                    <button class="tab" onclick="switchTab('custom')">–í–ª–∞—Å–Ω–∞ –º–æ–¥–µ–ª—å</button>
                </div>

                <!-- –í—ñ–∑—É–∞–ª—å–Ω–∞ –º–æ–¥–µ–ª—å -->
                <div id="visual" class="tab-content active">
                    <div class="canvas-container">
                        <canvas id="markovCanvas" width="800" height="500"></canvas>
                        <p style="text-align: center; margin-top: 10px; color: #666;">
                            –ö–ª—ñ–∫–Ω—ñ—Ç—å –Ω–∞ –ø–æ–ª–æ—Ç–Ω—ñ, —â–æ–± –¥–æ–¥–∞—Ç–∏ —Å—Ç–∞–Ω. –í–∏–±–µ—Ä—ñ—Ç—å –¥–≤–∞ —Å—Ç–∞–Ω–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–µ—Ä–µ—Ö–æ–¥—É.
                        </p>
                    </div>

                    <div class="controls">
                        <button onclick="clearCanvas()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏</button>
                        <button onclick="simulateSteps()">‚ñ∂Ô∏è –°–∏–º—É–ª—é–≤–∞—Ç–∏</button>
                        <button onclick="addRandomStates()">üé≤ –î–æ–¥–∞—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤—ñ —Å—Ç–∞–Ω–∏</button>
                    </div>

                    <div class="input-group">
                        <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫—Ä–æ–∫—ñ–≤ —Å–∏–º—É–ª—è—Ü—ñ—ó:</label>
                        <input type="number" id="simSteps" value="10" min="1" max="100">
                    </div>

                    <div class="simulation-output" id="visualOutput">
                        –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Å–∏–º—É–ª—è—Ü—ñ—ó –∑'—è–≤–ª—è—Ç—å—Å—è —Ç—É—Ç...
                    </div>
                </div>

                <!-- –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–≥–æ–¥–∏ -->
                <div id="weather" class="tab-content">
                    <div class="theory-box">
                        <h3>–ú–æ–¥–µ–ª—å –ø–æ–≥–æ–¥–∏</h3>
                        <p>–¢—Ä–∏ —Å—Ç–∞–Ω–∏: –°–æ–Ω—è—á–Ω–æ ‚òÄÔ∏è, –•–º–∞—Ä–Ω–æ ‚òÅÔ∏è, –î–æ—â üåßÔ∏è</p>
                    </div>

                    <div class="controls">
                        <div class="input-group">
                            <label>–ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω:</label>
                            <select id="weatherStart">
                                <option value="0">‚òÄÔ∏è –°–æ–Ω—è—á–Ω–æ</option>
                                <option value="1">‚òÅÔ∏è –•–º–∞—Ä–Ω–æ</option>
                                <option value="2">üåßÔ∏è –î–æ—â</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–Ω—ñ–≤:</label>
                            <input type="number" id="weatherDays" value="7" min="1" max="30">
                        </div>
                    </div>

                    <button onclick="simulateWeather()" style="width: 100%;">üå§Ô∏è –ü–µ—Ä–µ–¥–±–∞—á–∏—Ç–∏ –ø–æ–≥–æ–¥—É</button>

                    <div class="simulation-output" id="weatherOutput">
                        –ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –∑'—è–≤–∏—Ç—å—Å—è —Ç—É—Ç...
                    </div>

                    <div class="matrix-container">
                        <h4>–ú–∞—Ç—Ä–∏—Ü—è –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤ (–º–æ–∂–Ω–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏):</h4>
                        <table id="weatherMatrix">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>‚òÄÔ∏è –°–æ–Ω—è—á–Ω–æ</th>
                                    <th>‚òÅÔ∏è –•–º–∞—Ä–Ω–æ</th>
                                    <th>üåßÔ∏è –î–æ—â</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <th>‚òÄÔ∏è –°–æ–Ω—è—á–Ω–æ</th>
                                    <td><input type="number" step="0.1" value="0.7" min="0" max="1" onchange="normalizeRow(0)"></td>
                                    <td><input type="number" step="0.1" value="0.2" min="0" max="1" onchange="normalizeRow(0)"></td>
                                    <td><input type="number" step="0.1" value="0.1" min="0" max="1" onchange="normalizeRow(0)"></td>
                                </tr>
                                <tr>
                                    <th>‚òÅÔ∏è –•–º–∞—Ä–Ω–æ</th>
                                    <td><input type="number" step="0.1" value="0.3" min="0" max="1" onchange="normalizeRow(1)"></td>
                                    <td><input type="number" step="0.1" value="0.4" min="0" max="1" onchange="normalizeRow(1)"></td>
                                    <td><input type="number" step="0.1" value="0.3" min="0" max="1" onchange="normalizeRow(1)"></td>
                                </tr>
                                <tr>
                                    <th>üåßÔ∏è –î–æ—â</th>
                                    <td><input type="number" step="0.1" value="0.2" min="0" max="1" onchange="normalizeRow(2)"></td>
                                    <td><input type="number" step="0.1" value="0.3" min="0" max="1" onchange="normalizeRow(2)"></td>
                                    <td><input type="number" step="0.1" value="0.5" min="0" max="1" onchange="normalizeRow(2)"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- –í–ª–∞—Å–Ω–∞ –º–æ–¥–µ–ª—å -->
                <div id="custom" class="tab-content">
                    <div class="theory-box">
                        <h3>–°—Ç–≤–æ—Ä—ñ—Ç—å —Å–≤–æ—é –º–æ–¥–µ–ª—å</h3>
                        <p>–í–∏–∑–Ω–∞—á—Ç–µ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–∞–Ω—ñ–≤ —Ç–∞ –º–∞—Ç—Ä–∏—Ü—é –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤ –¥–ª—è –≤–∞—à–æ—ó –≤–ª–∞—Å–Ω–æ—ó –º–æ–¥–µ–ª—ñ</p>
                    </div>

                    <div class="input-group">
                        <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–∞–Ω—ñ–≤:</label>
                        <input type="number" id="customStates" value="3" min="2" max="6" onchange="generateCustomMatrix()">
                    </div>

                    <button onclick="generateCustomMatrix()" style="width: 100%; margin: 10px 0;">üîÑ –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –º–∞—Ç—Ä–∏—Ü—é</button>

                    <div class="matrix-container" id="customMatrixContainer">
                        <!-- –ú–∞—Ç—Ä–∏—Ü—è –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
                    </div>

                    <div class="controls">
                        <div class="input-group">
                            <label>–ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω:</label>
                            <select id="customStart">
                                <!-- –û–ø—Ü—ñ—ó –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
                            </select>
                        </div>
                        <div class="input-group">
                            <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫—Ä–æ–∫—ñ–≤:</label>
                            <input type="number" id="customSteps" value="10" min="1" max="50">
                        </div>
                    </div>

                    <button onclick="simulateCustom()" style="width: 100%;">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∏–º—É–ª—è—Ü—ñ—é</button>

                    <div class="simulation-output" id="customOutput">
                        –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Å–∏–º—É–ª—è—Ü—ñ—ó –∑'—è–≤–ª—è—Ç—å—Å—è —Ç—É—Ç...
                    </div>
                </div>
            </div>

            <!-- –ó–≤'—è–∑–æ–∫ –∑ –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ -->
            <div class="section">
                <h2>üé≤ –ó–≤'—è–∑–æ–∫ –∑ –º–µ—Ç–æ–¥–æ–º –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ</h2>
                <div class="theory-box">
                    <h3>–Ø–∫ –ø–æ–≤'—è–∑–∞–Ω—ñ –ª–∞–Ω—Ü—é–≥–∏ –ú–∞—Ä–∫–æ–≤–∞ —Ç–∞ –º–µ—Ç–æ–¥ –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ?</h3>
                    <p><strong>–ú–µ—Ç–æ–¥ –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ</strong> ‚Äî —Ü–µ —à–∏—Ä–æ–∫–∏–π –∫–ª–∞—Å –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –≤–∏–ø–∞–¥–∫–æ–≤—ñ –≤–∏–±—ñ—Ä–∫–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —á–∏—Å–ª–æ–≤–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.</p>
                    
                    <div class="formula">
                        –õ–∞–Ω—Ü—é–≥–∏ –ú–∞—Ä–∫–æ–≤–∞ + –ú–µ—Ç–æ–¥ –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ = MCMC (Markov Chain Monte Carlo)
                    </div>

                    <h4>–°–ø—ñ–ª—å–Ω—ñ —Ä–∏—Å–∏:</h4>
                    <ul style="margin: 15px 0; line-height: 1.8;">
                        <li>üé≤ <strong>–°—Ç–æ—Ö–∞—Å—Ç–∏—á–Ω—ñ—Å—Ç—å</strong> ‚Äî –æ–±–∏–¥–≤–∞ –º–µ—Ç–æ–¥–∏ –±–∞–∑—É—é—Ç—å—Å—è –Ω–∞ –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –ø—Ä–æ—Ü–µ—Å–∞—Ö</li>
                        <li>üîÑ <strong>–Ü—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ñ—Å—Ç—å</strong> ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω—ñ –∫—Ä–æ–∫–∏</li>
                        <li>üìä <strong>–ê–ø—Ä–æ–∫—Å–∏–º–∞—Ü—ñ—è</strong> ‚Äî –¥–∞—é—Ç—å –Ω–∞–±–ª–∏–∂–µ–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —á–µ—Ä–µ–∑ —Å–∏–º—É–ª—è—Ü—ñ—é</li>
                        <li>‚ö° <strong>–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å</strong> ‚Äî –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Å–∏—Å—Ç–µ–º</li>
                    </ul>

                    <h4>MCMC (Markov Chain Monte Carlo):</h4>
                    <p>–¶–µ –∫–ª–∞—Å –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤, —â–æ –ø–æ—î–¥–Ω—É—î –æ–±–∏–¥–≤–∞ –º–µ—Ç–æ–¥–∏ –¥–ª—è:</p>
                    <ul style="margin: 15px 0; line-height: 1.8;">
                        <li>–í–∏–±—ñ—Ä–∫–∏ –∑—ñ —Å–∫–ª–∞–¥–Ω–∏—Ö —Ä–æ–∑–ø–æ–¥—ñ–ª—ñ–≤ –π–º–æ–≤—ñ—Ä–Ω–æ—Å—Ç–µ–π</li>
                        <li>–ë–∞–π—î—Å—ñ–≤—Å—å–∫–æ–≥–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É</li>
                        <li>–ú–∞—à–∏–Ω–Ω–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è —Ç–∞ –Ω–µ–π—Ä–æ–Ω–Ω–∏—Ö –º–µ—Ä–µ–∂</li>
                        <li>–§—ñ–∑–∏—á–Ω–æ–≥–æ –º–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è (–∞–ª–≥–æ—Ä–∏—Ç–º –ú–µ—Ç—Ä–æ–ø–æ–ª—ñ—Å–∞)</li>
                    </ul>
                </div>

                <div class="example-box">
                    <h3>üéØ –ü—Ä–∏–∫–ª–∞–¥: –û–±—á–∏—Å–ª–µ–Ω–Ω—è œÄ</h3>
                    <p>–ö–ª–∞—Å–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –º–µ—Ç–æ–¥—É –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ ‚Äî –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —á–∏—Å–ª–∞ œÄ —á–µ—Ä–µ–∑ –≤–∏–ø–∞–¥–∫–æ–≤—ñ —Ç–æ—á–∫–∏ —É –∫–≤–∞–¥—Ä–∞—Ç—ñ –∑ –≤–ø–∏—Å–∞–Ω–∏–º –∫–æ–ª–æ–º.</p>
                </div>
            </div>

            <!-- –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ -->
            <div class="section">
                <h2>üéØ –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ —Å–∏–º—É–ª—è—Ü—ñ—ó –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ</h2>
                
                <div class="tabs">
                    <button class="tab active" onclick="switchMCTab('pi')">–û–±—á–∏—Å–ª–µ–Ω–Ω—è œÄ</button>
                    <button class="tab" onclick="switchMCTab('integration')">–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è</button>
                    <button class="tab" onclick="switchMCTab('mcmc')">MCMC —Å–∏–º—É–ª—è—Ü—ñ—è</button>
                </div>

                <!-- –û–±—á–∏—Å–ª–µ–Ω–Ω—è Pi -->
                <div id="pi" class="tab-content active">
                    <div class="theory-box">
                        <h3>–ú–µ—Ç–æ–¥ –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è œÄ</h3>
                        <p>–ö–∏–¥–∞—î–º–æ –≤–∏–ø–∞–¥–∫–æ–≤—ñ —Ç–æ—á–∫–∏ –≤ –∫–≤–∞–¥—Ä–∞—Ç 1√ó1. –Ø–∫—â–æ —Ç–æ—á–∫–∞ –ø–æ—Ç—Ä–∞–ø–ª—è—î –≤ –∫–æ–ª–æ —Ä–∞–¥—ñ—É—Å–æ–º 1, —Ä–∞—Ö—É—î–º–æ —ó—ó.</p>
                        <div class="formula">
                            œÄ ‚âà 4 √ó (–∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ—á–æ–∫ –≤ –∫–æ–ª—ñ) / (–∑–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ—á–æ–∫)
                        </div>
                    </div>

                    <div class="canvas-container">
                        <canvas id="piCanvas" width="400" height="400"></canvas>
                    </div>

                    <div class="controls">
                        <div class="input-group">
                            <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ—á–æ–∫:</label>
                            <input type="number" id="piPoints" value="1000" min="100" max="50000" step="100">
                        </div>
                        <div class="input-group">
                            <label>–®–≤–∏–¥–∫—ñ—Å—Ç—å –∞–Ω—ñ–º–∞—Ü—ñ—ó:</label>
                            <input type="range" id="piSpeed" min="1" max="100" value="50">
                        </div>
                    </div>

                    <div class="controls">
                        <button onclick="startPiSimulation()">‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç</button>
                        <button onclick="stopPiSimulation()">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
                        <button onclick="resetPiSimulation()">üîÑ –°–∫–∏–Ω—É—Ç–∏</button>
                    </div>

                    <div class="simulation-output" id="piOutput">
                        –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–°—Ç–∞—Ä—Ç" –¥–ª—è –ø–æ—á–∞—Ç–∫—É —Å–∏–º—É–ª—è—Ü—ñ—ó...
                    </div>
                </div>

                <!-- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è -->
                <div id="integration" class="tab-content">
                    <div class="theory-box">
                        <h3>–û–±—á–∏—Å–ª–µ–Ω–Ω—è —ñ–Ω—Ç–µ–≥—Ä–∞–ª–∞ –º–µ—Ç–æ–¥–æ–º –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ</h3>
                        <p>–û–±—á–∏—Å–ª—é—î–º–æ –ø–ª–æ—â—É –ø—ñ–¥ –∫—Ä–∏–≤–æ—é f(x) = x¬≤ –Ω–∞ —ñ–Ω—Ç–µ—Ä–≤–∞–ª—ñ [0, 1]</p>
                        <div class="formula">
                            ‚à´‚ÇÄ¬π x¬≤ dx = 1/3 ‚âà 0.333...
                        </div>
                    </div>

                    <div class="canvas-container">
                        <canvas id="integrationCanvas" width="500" height="400"></canvas>
                    </div>

                    <div class="controls">
                        <div class="input-group">
                            <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ—á–æ–∫:</label>
                            <input type="number" id="integrationPoints" value="2000" min="100" max="10000" step="100">
                        </div>
                    </div>

                    <button onclick="runIntegration()" style="width: 100%;">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∏–º—É–ª—è—Ü—ñ—é</button>

                    <div class="simulation-output" id="integrationOutput">
                        –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑'—è–≤–ª—è—Ç—å—Å—è —Ç—É—Ç...
                    </div>
                </div>

                <!-- MCMC -->
                <div id="mcmc" class="tab-content">
                    <div class="theory-box">
                        <h3>MCMC: –í–∏–±—ñ—Ä–∫–∞ –∑ —Ä–æ–∑–ø–æ–¥—ñ–ª—É</h3>
                        <p>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ª–∞–Ω—Ü—é–≥ –ú–∞—Ä–∫–æ–≤–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤–∏–±—ñ—Ä–∫–∏ –∑ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑–ø–æ–¥—ñ–ª—É (–∞–ª–≥–æ—Ä–∏—Ç–º –ú–µ—Ç—Ä–æ–ø–æ–ª—ñ—Å–∞-–ì–∞—Å—Ç—ñ–Ω–≥—Å–∞)</p>
                    </div>

                    <div class="canvas-container">
                        <canvas id="mcmcCanvas" width="600" height="400"></canvas>
                    </div>

                    <div class="controls">
                        <div class="input-group">
                            <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫—Ä–æ–∫—ñ–≤:</label>
                            <input type="number" id="mcmcSteps" value="5000" min="100" max="20000" step="100">
                        </div>
                        <div class="input-group">
                            <label>–°–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è (Œº):</label>
                            <input type="number" id="mcmcMean" value="0" step="0.5">
                        </div>
                        <div class="input-group">
                            <label>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è (œÉ):</label>
                            <input type="number" id="mcmcStd" value="1" min="0.1" step="0.1">
                        </div>
                    </div>

                    <button onclick="runMCMC()" style="width: 100%;">‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç–∏ MCMC</button>

                    <div class="simulation-output" id="mcmcOutput">
                        –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑'—è–≤–ª—è—Ç—å—Å—è —Ç—É—Ç...
                    </div>
                </div>
            </div>

            <!-- –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è -->
            <div class="section">
                <h2>üí° –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è</h2>
                <div class="theory-box">
                    <h3>–î–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –ª–∞–Ω—Ü—é–≥–∏ –ú–∞—Ä–∫–æ–≤–∞?</h3>
                    <ul style="line-height: 2;">
                        <li>üìä <strong>–ü—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è</strong> ‚Äî –ø–æ–≥–æ–¥–∞, —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ —Ä–∏–Ω–∫–∏</li>
                        <li>üéÆ <strong>–Ü–≥—Ä–∏</strong> ‚Äî –º–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ NPC</li>
                        <li>üî§ <strong>–û–±—Ä–æ–±–∫–∞ –º–æ–≤–∏</strong> ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ–∫—Å—Ç—É, –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è</li>
                        <li>üß¨ <strong>–ë—ñ–æ—ñ–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</strong> ‚Äî –∞–Ω–∞–ª—ñ–∑ –î–ù–ö –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç–µ–π</li>
                        <li>üåê <strong>–Ü–Ω—Ç–µ—Ä–Ω–µ—Ç</strong> ‚Äî –∞–ª–≥–æ—Ä–∏—Ç–º PageRank –≤—ñ–¥ Google</li>
                        <li>üì± <strong>–¢–µ–ª–µ–∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó</strong> ‚Äî –º–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è –º–µ—Ä–µ–∂–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É</li>
                        <li>üè• <strong>–ú–µ–¥–∏—Ü–∏–Ω–∞</strong> ‚Äî –ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–±—ñ–≥—É —Ö–≤–æ—Ä–æ–±</li>
                    </ul>
                </div>

                <div class="theory-box" style="margin-top: 20px;">
                    <h3>–ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –º–µ—Ç–æ–¥—É –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ —Ç–∞ MCMC:</h3>
                    <ul style="line-height: 2;">
                        <li>üé≤ <strong>–§—ñ–Ω–∞–Ω—Å–∏</strong> ‚Äî –æ—Ü—ñ–Ω–∫–∞ —Ä–∏–∑–∏–∫—ñ–≤, —Ü—ñ–Ω–æ—É—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–ø—Ü—ñ–æ–Ω—ñ–≤</li>
                        <li>üî¨ <strong>–§—ñ–∑–∏–∫–∞</strong> ‚Äî –º–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è –º–æ–ª–µ–∫—É–ª—è—Ä–Ω–æ—ó –¥–∏–Ω–∞–º—ñ–∫–∏</li>
                        <li>ü§ñ <strong>–ú–∞—à–∏–Ω–Ω–µ –Ω–∞–≤—á–∞–Ω–Ω—è</strong> ‚Äî –Ω–∞–≤—á–∞–Ω–Ω—è –º–æ–¥–µ–ª–µ–π, –±–∞–π—î—Å—ñ–≤—Å—å–∫–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è</li>
                        <li>üìà <strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</strong> ‚Äî –æ—Ü—ñ–Ω–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≥—ñ–ø–æ—Ç–µ–∑</li>
                        <li>üéØ <strong>–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è</strong> ‚Äî –ø–æ—à—É–∫ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –º—ñ–Ω—ñ–º—É–º—É</li>
                        <li>üåç <strong>–ö–ª—ñ–º–∞—Ç–æ–ª–æ–≥—ñ—è</strong> ‚Äî –ø—Ä–æ–≥–Ω–æ–∑—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–∏ –∫–ª—ñ–º–∞—Ç—É</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
        const canvas = document.getElementById('markovCanvas');
        const ctx = canvas.getContext('2d');
        let states = [];
        let transitions = [];
        let selectedState = null;
        let hoveredState = null;

        // –ö–ª–∞—Å –¥–ª—è —Å—Ç–∞–Ω—É
        class State {
            constructor(x, y, id) {
                this.x = x;
                this.y = y;
                this.id = id;
                this.radius = 30;
                this.label = `S${id}`;
            }

            draw(isSelected = false, isHovered = false) {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                
                if (isSelected) {
                    ctx.fillStyle = '#f39c12';
                } else if (isHovered) {
                    ctx.fillStyle = '#3498db';
                } else {
                    ctx.fillStyle = '#667eea';
                }
                
                ctx.fill();
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 3;
                ctx.stroke();

                ctx.fillStyle = 'white';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(this.label, this.x, this.y);
            }

            contains(x, y) {
                const dx = x - this.x;
                const dy = y - this.y;
                return dx * dx + dy * dy <= this.radius * this.radius;
            }
        }

        // –ö–ª–∞—Å –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É
        class Transition {
            constructor(from, to, probability) {
                this.from = from;
                this.to = to;
                this.probability = probability || 0.5;
            }

            draw() {
                const fromState = states[this.from];
                const toState = states[this.to];

                ctx.beginPath();
                ctx.strokeStyle = '#764ba2';
                ctx.lineWidth = 2;

                if (this.from === this.to) {
                    // –ü–µ—Ç–ª—è
                    const loopRadius = 40;
                    ctx.arc(fromState.x, fromState.y - fromState.radius - loopRadius, loopRadius, 0, Math.PI * 2);
                } else {
                    // –°—Ç—Ä—ñ–ª–∫–∞
                    const angle = Math.atan2(toState.y - fromState.y, toState.x - fromState.x);
                    const startX = fromState.x + Math.cos(angle) * fromState.radius;
                    const startY = fromState.y + Math.sin(angle) * fromState.radius;
                    const endX = toState.x - Math.cos(angle) * toState.radius;
                    const endY = toState.y - Math.sin(angle) * toState.radius;

                    ctx.moveTo(startX, startY);
                    ctx.lineTo(endX, endY);

                    // –°—Ç—Ä—ñ–ª–∫–∞
                    const arrowSize = 10;
                    ctx.lineTo(
                        endX - arrowSize * Math.cos(angle - Math.PI / 6),
                        endY - arrowSize * Math.sin(angle - Math.PI / 6)
                    );
                    ctx.moveTo(endX, endY);
                    ctx.lineTo(
                        endX - arrowSize * Math.cos(angle + Math.PI / 6),
                        endY - arrowSize * Math.sin(angle + Math.PI / 6)
                    );
                }

                ctx.stroke();

                // –ô–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å
                const midX = (fromState.x + toState.x) / 2;
                const midY = (fromState.y + toState.y) / 2 - 15;
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(this.probability.toFixed(2), midX, midY);
            }
        }

        // –§—É–Ω–∫—Ü—ñ—ó –º–∞–ª—é–≤–∞–Ω–Ω—è
        function drawCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // –ú–∞–ª—é—î–º–æ –ø–µ—Ä–µ—Ö–æ–¥–∏
            transitions.forEach(t => t.draw());

            // –ú–∞–ª—é—î–º–æ —Å—Ç–∞–Ω–∏
            states.forEach((state, index) => {
                const isSelected = selectedState === index;
                const isHovered = hoveredState === index;
                state.draw(isSelected, isHovered);
            });
        }

        // –ü–æ–¥—ñ—ó –º–∏—à—ñ
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            let clickedState = -1;
            for (let i = 0; i < states.length; i++) {
                if (states[i].contains(x, y)) {
                    clickedState = i;
                    break;
                }
            }

            if (clickedState !== -1) {
                if (selectedState === null) {
                    selectedState = clickedState;
                } else if (selectedState === clickedState) {
                    selectedState = null;
                } else {
                    // –°—Ç–≤–æ—Ä—é—î–º–æ –ø–µ—Ä–µ—Ö—ñ–¥
                    const existingTransition = transitions.find(
                        t => t.from === selectedState && t.to === clickedState
                    );
                    
                    if (!existingTransition) {
                        const prob = Math.random() * 0.5 + 0.3;
                        transitions.push(new Transition(selectedState, clickedState, prob));
                    }
                    selectedState = null;
                }
            } else {
                // –î–æ–¥–∞—î–º–æ –Ω–æ–≤–∏–π —Å—Ç–∞–Ω
                states.push(new State(x, y, states.length));
                selectedState = null;
            }

            drawCanvas();
        });

        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            let newHovered = null;
            for (let i = 0; i < states.length; i++) {
                if (states[i].contains(x, y)) {
                    newHovered = i;
                    break;
                }
            }

            if (newHovered !== hoveredState) {
                hoveredState = newHovered;
                drawCanvas();
            }
        });

        // –§—É–Ω–∫—Ü—ñ—ó —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
        function clearCanvas() {
            states = [];
            transitions = [];
            selectedState = null;
            hoveredState = null;
            drawCanvas();
        }

        function addRandomStates() {
            clearCanvas();
            const numStates = 4;
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 150;

            for (let i = 0; i < numStates; i++) {
                const angle = (i / numStates) * 2 * Math.PI;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                states.push(new State(x, y, i));
            }

            // –î–æ–¥–∞—î–º–æ –≤–∏–ø–∞–¥–∫–æ–≤—ñ –ø–µ—Ä–µ—Ö–æ–¥–∏
            for (let i = 0; i < numStates; i++) {
                for (let j = 0; j < numStates; j++) {
                    if (Math.random() > 0.5) {
                        const prob = Math.random() * 0.5 + 0.2;
                        transitions.push(new Transition(i, j, prob));
                    }
                }
            }

            drawCanvas();
        }

        function simulateSteps() {
            if (states.length === 0) {
                document.getElementById('visualOutput').textContent = '–°–ø–æ—á–∞—Ç–∫—É –¥–æ–¥–∞–π—Ç–µ —Å—Ç–∞–Ω–∏!';
                return;
            }

            const steps = parseInt(document.getElementById('simSteps').value);
            let currentState = 0;
            let output = `–°–∏–º—É–ª—è—Ü—ñ—è –Ω–∞ ${steps} –∫—Ä–æ–∫—ñ–≤:\n\n`;
            output += `–ü–æ—á–∞—Ç–æ–∫: ${states[currentState].label}\n`;

            for (let i = 0; i < steps; i++) {
                const possibleTransitions = transitions.filter(t => t.from === currentState);
                
                if (possibleTransitions.length === 0) {
                    output += `\n–ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø–µ—Ä–µ—Ö–æ–¥—ñ–≤ –∑ ${states[currentState].label}`;
                    break;
                }

                const totalProb = possibleTransitions.reduce((sum, t) => sum + t.probability, 0);
                let random = Math.random() * totalProb;
                
                for (const transition of possibleTransitions) {
                    random -= transition.probability;
                    if (random <= 0) {
                        currentState = transition.to;
                        break;
                    }
                }

                output += ` ‚Üí ${states[currentState].label}`;
            }

            document.getElementById('visualOutput').textContent = output;
        }

        // –°–∏–º—É–ª—è—Ü—ñ—è –ø–æ–≥–æ–¥–∏
        function simulateWeather() {
            const weatherNames = ['‚òÄÔ∏è –°–æ–Ω—è—á–Ω–æ', '‚òÅÔ∏è –•–º–∞—Ä–Ω–æ', 'üåßÔ∏è –î–æ—â'];
            const matrix = getWeatherMatrix();
            let currentState = parseInt(document.getElementById('weatherStart').value);
            const days = parseInt(document.getElementById('weatherDays').value);

            let output = `–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥–∏ –Ω–∞ ${days} –¥–Ω—ñ–≤:\n\n`;
            output += `–î–µ–Ω—å 1: ${weatherNames[currentState]}\n`;

            for (let i = 2; i <= days; i++) {
                const probs = matrix[currentState];
                const random = Math.random();
                let cumProb = 0;

                for (let j = 0; j < probs.length; j++) {
                    cumProb += probs[j];
                    if (random <= cumProb) {
                        currentState = j;
                        break;
                    }
                }

                output += `–î–µ–Ω—å ${i}: ${weatherNames[currentState]}\n`;
            }

            document.getElementById('weatherOutput').textContent = output;
        }

        function getWeatherMatrix() {
            const matrix = [];
            const table = document.getElementById('weatherMatrix');
            const rows = table.querySelectorAll('tbody tr');

            rows.forEach(row => {
                const inputs = row.querySelectorAll('input');
                const rowProbs = Array.from(inputs).map(input => parseFloat(input.value));
                matrix.push(rowProbs);
            });

            return matrix;
        }

        function normalizeRow(rowIndex) {
            const table = document.getElementById('weatherMatrix');
            const row = table.querySelectorAll('tbody tr')[rowIndex];
            const inputs = row.querySelectorAll('input');
            
            const sum = Array.from(inputs).reduce((s, input) => s + parseFloat(input.value), 0);
            
            if (sum !== 1 && sum > 0) {
                inputs.forEach(input => {
                    input.value = (parseFloat(input.value) / sum).toFixed(2);
                });
            }
        }

        // –í–ª–∞—Å–Ω–∞ –º–æ–¥–µ–ª—å
        function generateCustomMatrix() {
            const numStates = parseInt(document.getElementById('customStates').value);
            const container = document.getElementById('customMatrixContainer');
            const startSelect = document.getElementById('customStart');

            let html = '<table><thead><tr><th></th>';
            for (let i = 0; i < numStates; i++) {
                html += `<th>–°—Ç–∞–Ω ${i}</th>`;
            }
            html += '</tr></thead><tbody>';

            for (let i = 0; i < numStates; i++) {
                html += `<tr><th>–°—Ç–∞–Ω ${i}</th>`;
                for (let j = 0; j < numStates; j++) {
                    const value = (1 / numStates).toFixed(2);
                    html += `<td><input type="number" step="0.01" value="${value}" min="0" max="1"></td>`;
                }
                html += '</tr>';
            }
            html += '</tbody></table>';
            container.innerHTML = html;

            // –û–Ω–æ–≤–ª—é—î–º–æ select
            startSelect.innerHTML = '';
            for (let i = 0; i < numStates; i++) {
                startSelect.innerHTML += `<option value="${i}">–°—Ç–∞–Ω ${i}</option>`;
            }
        }

        function simulateCustom() {
            const numStates = parseInt(document.getElementById('customStates').value);
            const container = document.getElementById('customMatrixContainer');
            const table = container.querySelector('table');
            const rows = table.querySelectorAll('tbody tr');
            
            const matrix = [];
            rows.forEach(row => {
                const inputs = row.querySelectorAll('input');
                const rowProbs = Array.from(inputs).map(input => parseFloat(input.value));
                matrix.push(rowProbs);
            });

            let currentState = parseInt(document.getElementById('customStart').value);
            const steps = parseInt(document.getElementById('customSteps').value);

            let output = `–°–∏–º—É–ª—è—Ü—ñ—è –Ω–∞ ${steps} –∫—Ä–æ–∫—ñ–≤:\n\n`;
            output += `–ö—Ä–æ–∫ 0: –°—Ç–∞–Ω ${currentState}\n`;

            for (let i = 1; i <= steps; i++) {
                const probs = matrix[currentState];
                const random = Math.random();
                let cumProb = 0;

                for (let j = 0; j < probs.length; j++) {
                    cumProb += probs[j];
                    if (random <= cumProb) {
                        currentState = j;
                        break;
                    }
                }

                output += `–ö—Ä–æ–∫ ${i}: –°—Ç–∞–Ω ${currentState}\n`;
            }

            document.getElementById('customOutput').textContent = output;
        }

        // –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function switchMCTab(tabName) {
            const parentSection = event.target.closest('.section');
            parentSection.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            parentSection.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        // ========== MONTE CARLO –°–ò–ú–£–õ–Ø–¶–Ü–á ==========

        // –û–±—á–∏—Å–ª–µ–Ω–Ω—è Pi
        let piCanvas, piCtx;
        let piSimulationRunning = false;
        let piAnimationId = null;
        let piPointsInside = 0;
        let piTotalPoints = 0;

        function initPiCanvas() {
            piCanvas = document.getElementById('piCanvas');
            if (!piCanvas) return;
            piCtx = piCanvas.getContext('2d');
            resetPiSimulation();
        }

        function resetPiSimulation() {
            if (!piCtx) return;
            piPointsInside = 0;
            piTotalPoints = 0;
            
            piCtx.clearRect(0, 0, piCanvas.width, piCanvas.height);
            
            // –ú–∞–ª—é—î–º–æ –∫–≤–∞–¥—Ä–∞—Ç
            piCtx.strokeStyle = '#667eea';
            piCtx.lineWidth = 2;
            piCtx.strokeRect(0, 0, piCanvas.width, piCanvas.height);
            
            // –ú–∞–ª—é—î–º–æ –∫–æ–ª–æ
            piCtx.beginPath();
            piCtx.arc(piCanvas.width / 2, piCanvas.height / 2, piCanvas.width / 2, 0, Math.PI * 2);
            piCtx.strokeStyle = '#764ba2';
            piCtx.stroke();
            
            document.getElementById('piOutput').textContent = '–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–°—Ç–∞—Ä—Ç" –¥–ª—è –ø–æ—á–∞—Ç–∫—É —Å–∏–º—É–ª—è—Ü—ñ—ó...';
        }

        function startPiSimulation() {
            if (piSimulationRunning) return;
            piSimulationRunning = true;
            
            const maxPoints = parseInt(document.getElementById('piPoints').value);
            const speed = parseInt(document.getElementById('piSpeed').value);
            const pointsPerFrame = Math.max(1, Math.floor(speed / 10));
            
            function animate() {
                if (!piSimulationRunning || piTotalPoints >= maxPoints) {
                    piSimulationRunning = false;
                    return;
                }
                
                for (let i = 0; i < pointsPerFrame && piTotalPoints < maxPoints; i++) {
                    const x = Math.random() * piCanvas.width;
                    const y = Math.random() * piCanvas.height;
                    
                    const centerX = piCanvas.width / 2;
                    const centerY = piCanvas.height / 2;
                    const radius = piCanvas.width / 2;
                    
                    const distance = Math.sqrt(Math.pow(x - centerX, 2) + Math.pow(y - centerY, 2));
                    const isInside = distance <= radius;
                    
                    if (isInside) {
                        piPointsInside++;
                        piCtx.fillStyle = 'rgba(102, 126, 234, 0.5)';
                    } else {
                        piCtx.fillStyle = 'rgba(118, 75, 162, 0.3)';
                    }
                    
                    piCtx.fillRect(x - 1, y - 1, 2, 2);
                    piTotalPoints++;
                }
                
                const estimatedPi = 4 * piPointsInside / piTotalPoints;
                const error = Math.abs(estimatedPi - Math.PI);
                const errorPercent = (error / Math.PI * 100).toFixed(2);
                
                document.getElementById('piOutput').textContent = 
                    `–¢–æ—á–æ–∫ —É—Å—å–æ–≥–æ: ${piTotalPoints}\n` +
                    `–¢–æ—á–æ–∫ —É –∫–æ–ª—ñ: ${piPointsInside}\n` +
                    `–û—Ü—ñ–Ω–∫–∞ œÄ: ${estimatedPi.toFixed(6)}\n` +
                    `–°–ø—Ä–∞–≤–∂–Ω—î œÄ: ${Math.PI.toFixed(6)}\n` +
                    `–ü–æ—Ö–∏–±–∫–∞: ${error.toFixed(6)} (${errorPercent}%)`;
                
                piAnimationId = requestAnimationFrame(animate);
            }
            
            animate();
        }

        function stopPiSimulation() {
            piSimulationRunning = false;
            if (piAnimationId) {
                cancelAnimationFrame(piAnimationId);
            }
        }

        // –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –º–µ—Ç–æ–¥–æ–º –ú–æ–Ω—Ç–µ-–ö–∞—Ä–ª–æ
        function runIntegration() {
            const canvas = document.getElementById('integrationCanvas');
            const ctx = canvas.getContext('2d');
            const numPoints = parseInt(document.getElementById('integrationPoints').value);
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const padding = 40;
            const graphWidth = canvas.width - 2 * padding;
            const graphHeight = canvas.height - 2 * padding;
            
            // –ú–∞–ª—é—î–º–æ –æ—Å—ñ
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, canvas.height - padding);
            ctx.lineTo(canvas.width - padding, canvas.height - padding);
            ctx.moveTo(padding, canvas.height - padding);
            ctx.lineTo(padding, padding);
            ctx.stroke();
            
            // –ú–∞–ª—é—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é f(x) = x¬≤
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let i = 0; i <= graphWidth; i++) {
                const x = i / graphWidth;
                const y = x * x;
                const px = padding + i;
                const py = canvas.height - padding - y * graphHeight;
                if (i === 0) {
                    ctx.moveTo(px, py);
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.stroke();
            
            // –ì–µ–Ω–µ—Ä—É—î–º–æ –≤–∏–ø–∞–¥–∫–æ–≤—ñ —Ç–æ—á–∫–∏
            let pointsUnder = 0;
            for (let i = 0; i < numPoints; i++) {
                const x = Math.random();
                const y = Math.random();
                const fx = x * x;
                
                const px = padding + x * graphWidth;
                const py = canvas.height - padding - y * graphHeight;
                
                if (y <= fx) {
                    pointsUnder++;
                    ctx.fillStyle = 'rgba(102, 126, 234, 0.5)';
                } else {
                    ctx.fillStyle = 'rgba(118, 75, 162, 0.3)';
                }
                
                ctx.fillRect(px - 1, py - 1, 2, 2);
            }
            
            const estimatedIntegral = pointsUnder / numPoints;
            const trueValue = 1/3;
            const error = Math.abs(estimatedIntegral - trueValue);
            const errorPercent = (error / trueValue * 100).toFixed(2);
            
            // –ü—ñ–¥–ø–∏—Å–∏
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.fillText('0', padding - 10, canvas.height - padding + 20);
            ctx.fillText('1', canvas.width - padding, canvas.height - padding + 20);
            ctx.fillText('f(x) = x¬≤', canvas.width - padding - 60, padding + 20);
            
            document.getElementById('integrationOutput').textContent = 
                `–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ—á–æ–∫: ${numPoints}\n` +
                `–¢–æ—á–æ–∫ –ø—ñ–¥ –∫—Ä–∏–≤–æ—é: ${pointsUnder}\n` +
                `–û—Ü—ñ–Ω–∫–∞ —ñ–Ω—Ç–µ–≥—Ä–∞–ª–∞: ${estimatedIntegral.toFixed(6)}\n` +
                `–°–ø—Ä–∞–≤–∂–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è: ${trueValue.toFixed(6)}\n` +
                `–ü–æ—Ö–∏–±–∫–∞: ${error.toFixed(6)} (${errorPercent}%)`;
        }

        // MCMC - –ú–µ—Ç—Ä–æ–ø–æ–ª—ñ—Å-–ì–∞—Å—Ç—ñ–Ω–≥—Å
        function runMCMC() {
            const canvas = document.getElementById('mcmcCanvas');
            const ctx = canvas.getContext('2d');
            const steps = parseInt(document.getElementById('mcmcSteps').value);
            const targetMean = parseFloat(document.getElementById('mcmcMean').value);
            const targetStd = parseFloat(document.getElementById('mcmcStd').value);
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –§—É–Ω–∫—Ü—ñ—è —â—ñ–ª—å–Ω–æ—Å—Ç—ñ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑–ø–æ–¥—ñ–ª—É
            function normalPDF(x, mean, std) {
                return Math.exp(-0.5 * Math.pow((x - mean) / std, 2)) / (std * Math.sqrt(2 * Math.PI));
            }
            
            // –ê–ª–≥–æ—Ä–∏—Ç–º –ú–µ—Ç—Ä–æ–ø–æ–ª—ñ—Å–∞-–ì–∞—Å—Ç—ñ–Ω–≥—Å–∞
            const samples = [];
            let current = 0;
            let accepted = 0;
            
            for (let i = 0; i < steps; i++) {
                const proposal = current + (Math.random() - 0.5) * 2;
                const currentProb = normalPDF(current, targetMean, targetStd);
                const proposalProb = normalPDF(proposal, targetMean, targetStd);
                const acceptanceRatio = proposalProb / currentProb;
                
                if (Math.random() < acceptanceRatio) {
                    current = proposal;
                    accepted++;
                }
                
                samples.push(current);
            }
            
            // –ë—É–¥—É—î–º–æ –≥—ñ—Å—Ç–æ–≥—Ä–∞–º—É
            const binCount = 50;
            const minVal = Math.min(...samples);
            const maxVal = Math.max(...samples);
            const binWidth = (maxVal - minVal) / binCount;
            const bins = new Array(binCount).fill(0);
            
            samples.forEach(sample => {
                const binIndex = Math.min(Math.floor((sample - minVal) / binWidth), binCount - 1);
                bins[binIndex]++;
            });
            
            const maxBin = Math.max(...bins);
            const padding = 40;
            const graphWidth = canvas.width - 2 * padding;
            const graphHeight = canvas.height - 2 * padding;
            
            // –ú–∞–ª—é—î–º–æ –≥—ñ—Å—Ç–æ–≥—Ä–∞–º—É
            ctx.fillStyle = 'rgba(102, 126, 234, 0.7)';
            bins.forEach((count, i) => {
                const x = padding + (i / binCount) * graphWidth;
                const height = (count / maxBin) * graphHeight;
                const y = canvas.height - padding - height;
                const barWidth = graphWidth / binCount;
                ctx.fillRect(x, y, barWidth - 1, height);
            });
            
            // –ú–∞–ª—é—î–º–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω—É –∫—Ä–∏–≤—É
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let i = 0; i <= graphWidth; i++) {
                const x = minVal + (i / graphWidth) * (maxVal - minVal);
                const y = normalPDF(x, targetMean, targetStd);
                const px = padding + i;
                const py = canvas.height - padding - (y / (normalPDF(targetMean, targetMean, targetStd))) * graphHeight * 0.8;
                if (i === 0) {
                    ctx.moveTo(px, py);
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.stroke();
            
            // –û—Å—ñ
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, canvas.height - padding);
            ctx.lineTo(canvas.width - padding, canvas.height - padding);
            ctx.moveTo(padding, canvas.height - padding);
            ctx.lineTo(padding, padding);
            ctx.stroke();
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            const mean = samples.reduce((a, b) => a + b, 0) / samples.length;
            const variance = samples.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / samples.length;
            const std = Math.sqrt(variance);
            const acceptanceRate = (accepted / steps * 100).toFixed(1);
            
            document.getElementById('mcmcOutput').textContent = 
                `–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫—Ä–æ–∫—ñ–≤: ${steps}\n` +
                `–ü—Ä–∏–π–Ω—è—Ç–æ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ–π: ${accepted} (${acceptanceRate}%)\n\n` +
                `–ï–º–ø—ñ—Ä–∏—á–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n` +
                `  –°–µ—Ä–µ–¥–Ω—î: ${mean.toFixed(4)}\n` +
                `  –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è: ${std.toFixed(4)}\n\n` +
                `–¶—ñ–ª—å–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:\n` +
                `  –°–µ—Ä–µ–¥–Ω—î (Œº): ${targetMean.toFixed(4)}\n` +
                `  –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–µ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è (œÉ): ${targetStd.toFixed(4)}\n\n` +
                `üî¥ –ß–µ—Ä–≤–æ–Ω–∞ –ª—ñ–Ω—ñ—è ‚Äî —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω–∏–π —Ä–æ–∑–ø–æ–¥—ñ–ª\n` +
                `üîµ –°–∏–Ω—è –≥—ñ—Å—Ç–æ–≥—Ä–∞–º–∞ ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç MCMC`;
            
            // –ü—ñ–¥–ø–∏—Å–∏
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            ctx.fillText(minVal.toFixed(1), padding - 10, canvas.height - padding + 20);
            ctx.fillText(maxVal.toFixed(1), canvas.width - padding - 20, canvas.height - padding + 20);
        }

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        generateCustomMatrix();
        drawCanvas();
        
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ Pi canvas –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è DOM
        setTimeout(() => {
            initPiCanvas();
        }, 100);
    </script>
</body>
</html>